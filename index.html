<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Révisions d'Espagnol</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; line-height: 1.6; margin: 0; background: #f4f4f9; color: #333; }
        header { background: #e74c3c; color: white; text-align: center; padding: 1rem; }
        .container { width: 90%; max-width: 1000px; margin: 20px auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        
        .tabs { display: flex; cursor: pointer; border-bottom: 2px solid #ddd; margin-bottom: 20px; }
        .tab { padding: 10px 20px; border: 1px solid transparent; border-bottom: none; transition: 0.3s; font-weight: bold; }
        .tab:hover { color: #e74c3c; }
        .tab.active { border: 1px solid #ddd; border-bottom: 2px solid white; color: #e74c3c; margin-bottom: -2px; }
        
        .content { display: none; }
        .content.active { display: block; }

        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; }
        .card { border: 1px solid #eee; padding: 15px; border-radius: 5px; background: #fafafa; }
        .card h3 { color: #c0392b; margin-top: 0; border-bottom: 1px solid #eee; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        
        .flashcard { background: white; border: 2px solid #e74c3c; padding: 30px; border-radius: 10px; text-align: center; margin: 20px auto; max-width: 500px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); cursor: pointer; min-height: 200px; display: flex; flex-direction: column; justify-content: center; transition: 0.3s; }
        .flashcard:hover { transform: scale(1.02); }
        .flashcard-question { font-size: 18px; color: #333; font-weight: bold; margin-bottom: 20px; }
        .flashcard-answer { font-size: 24px; color: #e74c3c; font-weight: bold; display: none; }
        .flashcard.flipped .flashcard-question { display: none; }
        .flashcard.flipped .flashcard-answer { display: block; }
        .flashcard-text { font-size: 14px; color: #888; margin-top: 20px; }
        .btn { background: #e74c3c; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 14px; margin: 5px; }
        .btn:hover { background: #c0392b; }
        .btn-container { text-align: center; margin-top: 20px; }
        .score { font-size: 16px; color: #333; margin-bottom: 20px; }

    </style>
</head>
<body>

<header>
    <h1>Révisions d'Espagnol</h1>
</header>

<div class="container">
    <div class="tabs">
        <div class="tab active" onclick="openTab(event, 'grammaire')">Temps & Conjugaison</div>
        <div class="tab" onclick="openTab(event, 'conjugaison')">Conjugaison (Présent)</div>
        <div class="tab" onclick="openTab(event, 'verbes')">Verbes de Base (20)</div>
        <div class="tab" onclick="openTab(event, 'exercices')">Exercices</div>
        <div class="tab" onclick="openTab(event, 'exercices-base')">Exercices Verbes de Base</div>
    </div>

    <div id="grammaire" class="content active">
        <div class="card">
            <h3>Presente</h3>
            <p><strong>-AR:</strong> -o, -as, -a, -amos, -áis, -an</p>
            <p><strong>-ER:</strong> -o, -es, -e, -emos, -éis, -en</p>
            <p><strong>-IR:</strong> -o, -es, -e, -imos, -ís, -en</p>
            <p style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee;"><strong>Irréguliers:</strong></p>
            <p><strong>Ser:</strong> soy, eres, es, somos, sois, son</p>
            <p><strong>Ir:</strong> voy, vas, va, vamos, vais, van</p>
            <p><strong>Estar:</strong> estoy, estás, está, estamos, estáis, están</p>
            <p><strong>Hacer:</strong> hago, haces, hace, hacemos, hacéis, hacen</p>
        </div>
        <div class="card">
            <h3>Imperfecto</h3>
            <p><strong>-AR:</strong> -aba, -abas, -aba, -ábamos, -abais, -aban</p>
            <p><strong>-ER/-IR:</strong> -ía, -ías, -ía, -íamos, -íais, -ían</p>
            <p style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee;"><strong>Irréguliers:</strong></p>
            <p><strong>Ser:</strong> era, eras, era, éramos, erais, eran</p>
            <p><strong>Ir:</strong> iba, ibas, iba, íbamos, ibais, iban (même conjugaison que ir régulier)</p>
            <p><strong>Ver:</strong> veía, veías, veía, veíamos, veíais, veían</p>
        </div>
        <div class="card">
            <h3>Pasado Compuesto</h3>
            <p>Auxiliaire <strong>Haber</strong> + Participe passé (-ado / -ido)</p>
            <p><em>he, has, ha, hemos, habéis, han</em></p>
            <p style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee;"><strong>Participes irréguliers:</strong></p>
            <p><strong>Hacer:</strong> hecho | <strong>Ver:</strong> visto | <strong>Escribir:</strong> escrito</p>
            <p><strong>Abrir:</strong> abierto | <strong>Decir:</strong> dicho | <strong>Poner:</strong> puesto</p>
        </div>
        <div class="card">
            <h3>Futuro Simple</h3>
            <p>Infinitif + terminaisons :</p>
            <p><strong>-é, -ás, -á, -emos, -éis, -án</strong></p>
            <p style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee;"><strong>Irréguliers (radical modifié):</strong></p>
            <p><strong>Decir:</strong> diré, dirás, dirá... | <strong>Hacer:</strong> haré, harás, hará...</p>
            <p><strong>Tener:</strong> tendré, tendrás, tendrá... | <strong>Venir:</strong> vendré, vendrás, vendrá...</p>
            <p><strong>Poner:</strong> pondré, pondrás, pondrá... | <strong>Saber:</strong> sabré, sabrás, sabrá...</p>
        </div>
    </div>

    <div id="conjugaison" class="content">
        <div class="card">
            <h3>Ser (être - identité, profession)</h3>
            <table>
                <tr><td>yo</td><td>soy</td></tr>
                <tr><td>tú</td><td>eres</td></tr>
                <tr><td>él/ella/usted</td><td>es</td></tr>
                <tr><td>nosotros/as</td><td>somos</td></tr>
                <tr><td>vosotros/as</td><td>sois</td></tr>
                <tr><td>ellos/ellas/ustedes</td><td>son</td></tr>
            </table>
        </div>
        <div class="card">
            <h3>Estar (être - localisation, état)</h3>
            <table>
                <tr><td>yo</td><td>estoy</td></tr>
                <tr><td>tú</td><td>estás</td></tr>
                <tr><td>él/ella/usted</td><td>está</td></tr>
                <tr><td>nosotros/as</td><td>estamos</td></tr>
                <tr><td>vosotros/as</td><td>estáis</td></tr>
                <tr><td>ellos/ellas/ustedes</td><td>están</td></tr>
            </table>
        </div>
        <div class="card">
            <h3>Haber (avoir - auxiliaire)</h3>
            <table>
                <tr><td>yo</td><td>he</td></tr>
                <tr><td>tú</td><td>has</td></tr>
                <tr><td>él/ella/usted</td><td>ha</td></tr>
                <tr><td>nosotros/as</td><td>hemos</td></tr>
                <tr><td>vosotros/as</td><td>habéis</td></tr>
                <tr><td>ellos/ellas/ustedes</td><td>han</td></tr>
            </table>
        </div>
        <div class="card">
            <h3>Tener (avoir - posséder)</h3>
            <table>
                <tr><td>yo</td><td>tengo</td></tr>
                <tr><td>tú</td><td>tienes</td></tr>
                <tr><td>él/ella/usted</td><td>tiene</td></tr>
                <tr><td>nosotros/as</td><td>tenemos</td></tr>
                <tr><td>vosotros/as</td><td>tenéis</td></tr>
                <tr><td>ellos/ellas/ustedes</td><td>tienen</td></tr>
            </table>
        </div>
        <div class="card">
            <h3>Ir (aller)</h3>
            <table>
                <tr><td>yo</td><td>voy</td></tr>
                <tr><td>tú</td><td>vas</td></tr>
                <tr><td>él/ella/usted</td><td>va</td></tr>
                <tr><td>nosotros/as</td><td>vamos</td></tr>
                <tr><td>vosotros/as</td><td>vais</td></tr>
                <tr><td>ellos/ellas/ustedes</td><td>van</td></tr>
            </table>
        </div>
    </div>

    <div id="verbes" class="content">
        <table>
            <thead>
                <tr>
                    <th>Espagnol</th>
                    <th>Français</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>Ser / Estar</td><td>Être</td></tr>
                <tr><td>Ir</td><td>Aller</td></tr>
                <tr><td>Haber</td><td>Avoir (auxiliaire)</td></tr>
                <tr><td>Tener</td><td>Avoir / Posséder</td></tr>
                <tr><td>Hacer</td><td>Faire</td></tr>
                <tr><td>Poder</td><td>Pouvoir</td></tr>
                <tr><td>Decir</td><td>Dire</td></tr>
                <tr><td>Querer</td><td>Vouloir</td></tr>
                <tr><td>Ver</td><td>Voir</td></tr>
                <tr><td>Saber</td><td>Savoir</td></tr>
                <tr><td>Dar</td><td>Donner</td></tr>
                <tr><td>Venir</td><td>Venir</td></tr>
                <tr><td>Llegar</td><td>Arriver</td></tr>
                <tr><td>Pensar</td><td>Penser</td></tr>
                <tr><td>Comer</td><td>Manger</td></tr>
                <tr><td>Beber</td><td>Boire</td></tr>
                <tr><td>Vivir</td><td>Vivre</td></tr>
                <tr><td>Dormir</td><td>Dormir</td></tr>
                <tr><td>Hablar</td><td>Parler</td></tr>
                <tr><td>Escribir</td><td>Écrire</td></tr>
            </tbody>
        </table>
    </div>

    <div id="exercices" class="content">
        <div id="exercices-container"></div>
    </div>

    <div id="exercices-base" class="content">
        <div id="exercices-base-container"></div>
    </div>
</div>

<script>
    function openTab(evt, tabName) {
        var i, content, tabs;
        content = document.getElementsByClassName("content");
        for (i = 0; i < content.length; i++) { content[i].style.display = "none"; }
        tabs = document.getElementsByClassName("tab");
        for (i = 0; i < tabs.length; i++) { tabs[i].className = tabs[i].className.replace(" active", ""); }
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
        if (tabName === 'exercices') {
            afficherSelectionTemps();
        } else if (tabName === 'exercices-base') {
            genererQuestionsVerbsBase();
        }
    }
    const conjugaisonsBase = [
        { verbe: "ser", infinitif: "être (identité)", yo: "soy", tu: "eres", el: "es", nosotros: "somos", vosotros: "sois", ellos: "son" },
        { verbe: "estar", infinitif: "être (localisation)", yo: "estoy", tu: "estás", el: "está", nosotros: "estamos", vosotros: "estáis", ellos: "están" },
        { verbe: "ir", infinitif: "aller", yo: "voy", tu: "vas", el: "va", nosotros: "vamos", vosotros: "vais", ellos: "van" },
        { verbe: "haber", infinitif: "avoir (auxiliaire)", yo: "he", tu: "has", el: "ha", nosotros: "hemos", vosotros: "habéis", ellos: "han" },
        { verbe: "tener", infinitif: "avoir/posséder", yo: "tengo", tu: "tienes", el: "tiene", nosotros: "tenemos", vosotros: "tenéis", ellos: "tienen" },
        { verbe: "hacer", infinitif: "faire", yo: "hago", tu: "haces", el: "hace", nosotros: "hacemos", vosotros: "hacéis", ellos: "hacen" },
        { verbe: "poder", infinitif: "pouvoir", yo: "puedo", tu: "puedes", el: "puede", nosotros: "podemos", vosotros: "podéis", ellos: "pueden" },
        { verbe: "decir", infinitif: "dire", yo: "digo", tu: "dices", el: "dice", nosotros: "decimos", vosotros: "decís", ellos: "dicen" },
        { verbe: "querer", infinitif: "vouloir", yo: "quiero", tu: "quieres", el: "quiere", nosotros: "queremos", vosotros: "queréis", ellos: "quieren" },
        { verbe: "ver", infinitif: "voir", yo: "veo", tu: "ves", el: "ve", nosotros: "vemos", vosotros: "veis", ellos: "ven" },
        { verbe: "saber", infinitif: "savoir", yo: "sé", tu: "sabes", el: "sabe", nosotros: "sabemos", vosotros: "sabéis", ellos: "saben" },
        { verbe: "dar", infinitif: "donner", yo: "doy", tu: "das", el: "da", nosotros: "damos", vosotros: "dais", ellos: "dan" },
        { verbe: "venir", infinitif: "venir", yo: "vengo", tu: "vienes", el: "viene", nosotros: "venimos", vosotros: "venís", ellos: "vienen" },
        { verbe: "llegar", infinitif: "arriver", yo: "llego", tu: "llegas", el: "llega", nosotros: "llegamos", vosotros: "llegáis", ellos: "llegan" },
        { verbe: "pensar", infinitif: "penser", yo: "pienso", tu: "piensas", el: "piensa", nosotros: "pensamos", vosotros: "pensáis", ellos: "piensan" },
        { verbe: "comer", infinitif: "manger", yo: "como", tu: "comes", el: "come", nosotros: "comemos", vosotros: "coméis", ellos: "comen" },
        { verbe: "beber", infinitif: "boire", yo: "bebo", tu: "bebes", el: "bebe", nosotros: "bebemos", vosotros: "bebéis", ellos: "beben" },
        { verbe: "vivir", infinitif: "vivre", yo: "vivo", tu: "vives", el: "vive", nosotros: "vivimos", vosotros: "vivís", ellos: "viven" },
        { verbe: "dormir", infinitif: "dormir", yo: "duermo", tu: "duermes", el: "duerme", nosotros: "dormimos", vosotros: "dormís", ellos: "duermen" },
        { verbe: "hablar", infinitif: "parler", yo: "hablo", tu: "hablas", el: "habla", nosotros: "hablamos", vosotros: "habláis", ellos: "hablan" },
        { verbe: "escribir", infinitif: "écrire", yo: "escribo", tu: "escribes", el: "escribe", nosotros: "escribimos", vosotros: "escribís", ellos: "escriben" }
    ];
    const conjugaisons = [
        { verbe: "hablar", infinitif: "parler", presente: { yo: "hablo", tu: "hablas", el: "habla", nosotros: "hablamos", vosotros: "habláis", ellos: "hablan" }, imperfect: { yo: "hablaba", tu: "hablabas", el: "hablaba", nosotros: "hablábamos", vosotros: "hablabais", ellos: "hablaban" }, preterito: { yo: "hablé", tu: "hablaste", el: "habló", nosotros: "hablamos", vosotros: "hablasteis", ellos: "hablaron" }, futuro: { yo: "hablaré", tu: "hablarás", el: "hablará", nosotros: "hablaremos", vosotros: "hablaréis", ellos: "hablarán" }, pasadoCompuesto: { yo: "he hablado", tu: "has hablado", el: "ha hablado", nosotros: "hemos hablado", vosotros: "habéis hablado", ellos: "han hablado" } },
        { verbe: "comer", infinitif: "manger", presente: { yo: "como", tu: "comes", el: "come", nosotros: "comemos", vosotros: "coméis", ellos: "comen" }, imperfect: { yo: "comía", tu: "comías", el: "comía", nosotros: "comíamos", vosotros: "comíais", ellos: "comían" }, preterito: { yo: "comí", tu: "comiste", el: "comió", nosotros: "comimos", vosotros: "comisteis", ellos: "comieron" }, futuro: { yo: "comeré", tu: "comerás", el: "comerá", nosotros: "comeremos", vosotros: "comeréis", ellos: "comerán" }, pasadoCompuesto: { yo: "he comido", tu: "has comido", el: "ha comido", nosotros: "hemos comido", vosotros: "habéis comido", ellos: "han comido" } },
        { verbe: "vivir", infinitif: "vivre", presente: { yo: "vivo", tu: "vives", el: "vive", nosotros: "vivimos", vosotros: "vivís", ellos: "viven" }, imperfect: { yo: "vivía", tu: "vivías", el: "vivía", nosotros: "vivíamos", vosotros: "vivíais", ellos: "vivían" }, preterito: { yo: "viví", tu: "viviste", el: "vivió", nosotros: "vivimos", vosotros: "vivisteis", ellos: "vivieron" }, futuro: { yo: "viviré", tu: "vivirás", el: "vivirá", nosotros: "viviremos", vosotros: "viviréis", ellos: "vivirán" }, pasadoCompuesto: { yo: "he vivido", tu: "has vivido", el: "ha vivido", nosotros: "hemos vivido", vosotros: "habéis vivido", ellos: "han vivido" } },
        { verbe: "ir", infinitif: "aller", presente: { yo: "voy", tu: "vas", el: "va", nosotros: "vamos", vosotros: "vais", ellos: "van" }, imperfect: { yo: "iba", tu: "ibas", el: "iba", nosotros: "íbamos", vosotros: "ibais", ellos: "iban" }, preterito: { yo: "fui", tu: "fuiste", el: "fue", nosotros: "fuimos", vosotros: "fuisteis", ellos: "fueron" }, futuro: { yo: "iré", tu: "irás", el: "irá", nosotros: "iremos", vosotros: "iréis", ellos: "irán" }, pasadoCompuesto: { yo: "he ido", tu: "has ido", el: "ha ido", nosotros: "hemos ido", vosotros: "habéis ido", ellos: "han ido" } },
        { verbe: "hacer", infinitif: "faire", presente: { yo: "hago", tu: "haces", el: "hace", nosotros: "hacemos", vosotros: "hacéis", ellos: "hacen" }, imperfect: { yo: "hacía", tu: "hacías", el: "hacía", nosotros: "hacíamos", vosotros: "hacíais", ellos: "hacían" }, preterito: { yo: "hice", tu: "hiciste", el: "hizo", nosotros: "hicimos", vosotros: "hicisteis", ellos: "hicieron" }, futuro: { yo: "haré", tu: "harás", el: "hará", nosotros: "haremos", vosotros: "haréis", ellos: "harán" }, pasadoCompuesto: { yo: "he hecho", tu: "has hecho", el: "ha hecho", nosotros: "hemos hecho", vosotros: "habéis hecho", ellos: "han hecho" } },
        { verbe: "poder", infinitif: "pouvoir", presente: { yo: "puedo", tu: "puedes", el: "puede", nosotros: "podemos", vosotros: "podéis", ellos: "pueden" }, imperfect: { yo: "podía", tu: "podías", el: "podía", nosotros: "podíamos", vosotros: "podíais", ellos: "podían" }, preterito: { yo: "pude", tu: "pudiste", el: "pudo", nosotros: "pudimos", vosotros: "pudisteis", ellos: "pudieron" }, futuro: { yo: "podré", tu: "podrás", el: "podrá", nosotros: "podremos", vosotros: "podréis", ellos: "podrán" }, pasadoCompuesto: { yo: "he podido", tu: "has podido", el: "ha podido", nosotros: "hemos podido", vosotros: "habéis podido", ellos: "han podido" } },
        { verbe: "decir", infinitif: "dire", presente: { yo: "digo", tu: "dices", el: "dice", nosotros: "decimos", vosotros: "decís", ellos: "dicen" }, imperfect: { yo: "decía", tu: "decías", el: "decía", nosotros: "decíamos", vosotros: "decíais", ellos: "decían" }, preterito: { yo: "dije", tu: "dijiste", el: "dijo", nosotros: "dijimos", vosotros: "dijisteis", ellos: "dijeron" }, futuro: { yo: "diré", tu: "dirás", el: "dirá", nosotros: "diremos", vosotros: "diréis", ellos: "dirán" }, pasadoCompuesto: { yo: "he dicho", tu: "has dicho", el: "ha dicho", nosotros: "hemos dicho", vosotros: "habéis dicho", ellos: "han dicho" } },
        { verbe: "querer", infinitif: "vouloir", presente: { yo: "quiero", tu: "quieres", el: "quiere", nosotros: "queremos", vosotros: "queréis", ellos: "quieren" }, imperfect: { yo: "quería", tu: "querías", el: "quería", nosotros: "queríamos", vosotros: "queríais", ellos: "querían" }, preterito: { yo: "quise", tu: "quisiste", el: "quiso", nosotros: "quisimos", vosotros: "quisisteis", ellos: "quisieron" }, futuro: { yo: "querré", tu: "querrás", el: "querrá", nosotros: "querremos", vosotros: "querréis", ellos: "querrán" }, pasadoCompuesto: { yo: "he querido", tu: "has querido", el: "ha querido", nosotros: "hemos querido", vosotros: "habéis querido", ellos: "han querido" } },
        { verbe: "saber", infinitif: "savoir", presente: { yo: "sé", tu: "sabes", el: "sabe", nosotros: "sabemos", vosotros: "sabéis", ellos: "saben" }, imperfect: { yo: "sabía", tu: "sabías", el: "sabía", nosotros: "sabíamos", vosotros: "sabíais", ellos: "sabían" }, preterito: { yo: "supe", tu: "supiste", el: "supo", nosotros: "supimos", vosotros: "supisteis", ellos: "supieron" }, futuro: { yo: "sabré", tu: "sabrás", el: "sabrá", nosotros: "sabremos", vosotros: "sabréis", ellos: "sabrán" }, pasadoCompuesto: { yo: "he sabido", tu: "has sabido", el: "ha sabido", nosotros: "hemos sabido", vosotros: "habéis sabido", ellos: "han sabido" } },
        { verbe: "dar", infinitif: "donner", presente: { yo: "doy", tu: "das", el: "da", nosotros: "damos", vosotros: "dais", ellos: "dan" }, imperfect: { yo: "daba", tu: "dabas", el: "daba", nosotros: "dábamos", vosotros: "dabais", ellos: "daban" }, preterito: { yo: "dí", tu: "diste", el: "dio", nosotros: "dimos", vosotros: "disteis", ellos: "dieron" }, futuro: { yo: "daré", tu: "darás", el: "dará", nosotros: "daremos", vosotros: "daréis", ellos: "darán" }, pasadoCompuesto: { yo: "he dado", tu: "has dado", el: "ha dado", nosotros: "hemos dado", vosotros: "habéis dado", ellos: "han dado" } },
        { verbe: "venir", infinitif: "venir", presente: { yo: "vengo", tu: "vienes", el: "viene", nosotros: "venimos", vosotros: "venís", ellos: "vienen" }, imperfect: { yo: "venía", tu: "venías", el: "venía", nosotros: "veníamos", vosotros: "veníais", ellos: "venían" }, preterito: { yo: "vine", tu: "viniste", el: "vino", nosotros: "vinimos", vosotros: "vinisteis", ellos: "vinieron" }, futuro: { yo: "vendré", tu: "vendrás", el: "vendrá", nosotros: "vendremos", vosotros: "vendréis", ellos: "vendrán" }, pasadoCompuesto: { yo: "he venido", tu: "has venido", el: "ha venido", nosotros: "hemos venido", vosotros: "habéis venido", ellos: "han venido" } },
        { verbe: "pensar", infinitif: "penser", presente: { yo: "pienso", tu: "piensas", el: "piensa", nosotros: "pensamos", vosotros: "pensáis", ellos: "piensan" }, imperfect: { yo: "pensaba", tu: "pensabas", el: "pensaba", nosotros: "pensábamos", vosotros: "pensabais", ellos: "pensaban" }, preterito: { yo: "pensé", tu: "pensaste", el: "pensó", nosotros: "pensamos", vosotros: "pensasteis", ellos: "pensaron" }, futuro: { yo: "pensaré", tu: "pensarás", el: "pensará", nosotros: "pensaremos", vosotros: "pensaréis", ellos: "pensarán" }, pasadoCompuesto: { yo: "he pensado", tu: "has pensado", el: "ha pensado", nosotros: "hemos pensado", vosotros: "habéis pensado", ellos: "han pensado" } },
        { verbe: "llegar", infinitif: "arriver", presente: { yo: "llego", tu: "llegas", el: "llega", nosotros: "llegamos", vosotros: "llegáis", ellos: "llegan" }, imperfect: { yo: "llegaba", tu: "llegabas", el: "llegaba", nosotros: "llegábamos", vosotros: "llegabais", ellos: "llegaban" }, preterito: { yo: "llegué", tu: "llegaste", el: "llegó", nosotros: "llegamos", vosotros: "llegasteis", ellos: "llegaron" }, futuro: { yo: "llegaré", tu: "llegarás", el: "llegará", nosotros: "llegaremos", vosotros: "llegaréis", ellos: "llegarán" }, pasadoCompuesto: { yo: "he llegado", tu: "has llegado", el: "ha llegado", nosotros: "hemos llegado", vosotros: "habéis llegado", ellos: "han llegado" } },
        { verbe: "escribir", infinitif: "écrire", presente: { yo: "escribo", tu: "escribes", el: "escribe", nosotros: "escribimos", vosotros: "escribís", ellos: "escriben" }, imperfect: { yo: "escribía", tu: "escribías", el: "escribía", nosotros: "escribíamos", vosotros: "escribíais", ellos: "escribían" }, preterito: { yo: "escribí", tu: "escribiste", el: "escribió", nosotros: "escribimos", vosotros: "escribisteis", ellos: "escribieron" }, futuro: { yo: "escribiré", tu: "escribirás", el: "escribirá", nosotros: "escribiremos", vosotros: "escribiréis", ellos: "escribirán" }, pasadoCompuesto: { yo: "he escrito", tu: "has escrito", el: "ha escrito", nosotros: "hemos escrito", vosotros: "habéis escrito", ellos: "han escrito" } },
        { verbe: "dormir", infinitif: "dormir", presente: { yo: "duermo", tu: "duermes", el: "duerme", nosotros: "dormimos", vosotros: "dormís", ellos: "duermen" }, imperfect: { yo: "dormía", tu: "dormías", el: "dormía", nosotros: "dormíamos", vosotros: "dormíais", ellos: "dormían" }, preterito: { yo: "dormí", tu: "dormiste", el: "durmió", nosotros: "dormimos", vosotros: "dormisteis", ellos: "durmieron" }, futuro: { yo: "dormiré", tu: "dormirás", el: "dormirá", nosotros: "dormiremos", vosotros: "dormiréis", ellos: "dormirán" }, pasadoCompuesto: { yo: "he dormido", tu: "has dormido", el: "ha dormido", nosotros: "hemos dormido", vosotros: "habéis dormido", ellos: "han dormido" } }
    ];

    function normaliserAccents(str) {
        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase().trim();
    }

    const pronouns = ["yo", "tú", "él/ella/usted", "nosotros/as", "vosotros/as", "ellos/ellas/ustedes"];
    const pronounKeys = ["yo", "tu", "el", "nosotros", "vosotros", "ellos"];

    let currentQuestion = 0;
    let questions = [];
    let tempsActuel = "presente";

    function afficherSelectionTemps() {
        const container = document.getElementById('exercices-container');
        container.innerHTML = `
            <div class="card" style="text-align: center; padding: 40px;">
                <h3 style="margin-top: 0; color: #e74c3c; font-size: 24px;">Choisissez le temps à réviser</h3>
                <div class="btn-container" style="margin-top: 40px;">
                    <button class="btn" style="padding: 15px 30px; font-size: 16px;" onclick="genererQuestions('presente')">Présent</button>
                    <button class="btn" style="padding: 15px 30px; font-size: 16px;" onclick="genererQuestions('imperfect')">Imparfait</button>
                    <button class="btn" style="padding: 15px 30px; font-size: 16px;" onclick="genererQuestions('preterito')">Passé Simple</button>
                    <button class="btn" style="padding: 15px 30px; font-size: 16px;" onclick="genererQuestions('pasadoCompuesto')">Passé Composé</button>
                    <button class="btn" style="padding: 15px 30px; font-size: 16px;" onclick="genererQuestions('futuro')">Futur Simple</button>
                </div>
            </div>
        `;
    }

    function genererQuestions(temps) {
        tempsActuel = temps;
        const tempsTexte = {
            'presente': 'présent',
            'imperfect': 'imparfait',
            'preterito': 'passé simple',
            'pasadoCompuesto': 'passé composé',
            'futuro': 'futur simple'
        };

        questions = [];
        conjugaisons.forEach(conj => {
            const conjugaisonTemps = conj[temps];
            for (let i = 0; i < pronounKeys.length; i++) {
                questions.push({
                    question: `Conjugue "${conj.infinitif}" (${conj.verbe}) à la 3e personne du singulier ${tempsTexte[temps]}`,
                    answer: conjugaisonTemps.el,
                    type: "conjugaison"
                });
            }
        });

        conjugaisons.forEach(conj => {
            questions.push({
                question: `Qu'est-ce que "${conj.verbe}" signifie?`,
                answer: conj.infinitif,
                type: "traduction"
            });
        });

        for (let i = 0; i < 300; i++) {
            const conj = conjugaisons[Math.floor(Math.random() * conjugaisons.length)];
            const pronoun = pronounKeys[Math.floor(Math.random() * pronounKeys.length)];
            const pronounFr = pronouns[pronounKeys.indexOf(pronoun)];
            const conjugaisonTemps = conj[temps];
            questions.push({
                question: `Conjugue "${conj.verbe}" avec "${pronounFr}" au ${tempsTexte[temps]}`,
                answer: conjugaisonTemps[pronoun],
                type: "random"
            });
        }

        questions = questions.sort(() => Math.random() - 0.5);
        currentQuestion = 0;
        afficherQuestion();
    }

    function afficherQuestion() {
        const container = document.getElementById('exercices-container');
        if (currentQuestion >= questions.length) {
            container.innerHTML = '<div class="card"><h3>Bravo!</h3><p>Vous avez complété tous les exercices!</p><button class="btn" onclick="afficherSelectionTemps()">Changer de temps</button><button class="btn" onclick="afficherSelectionTemps()">Recommencer</button></div>';
            return;
        }

        const q = questions[currentQuestion];
        container.innerHTML = `
            <div class="score">Question ${currentQuestion + 1} / ${questions.length}</div>
            <div class="flashcard">
                <div class="flashcard-question">${q.question}</div>
                <div style="margin-top: 20px;">
                    <input type="text" id="userAnswer" placeholder="Votre réponse..." style="padding: 10px; font-size: 16px; width: 100%; max-width: 400px; border: 2px solid #ddd; border-radius: 5px; box-sizing: border-box;" onkeypress="if(event.key==='Enter') verifierReponse('${q.answer}')">
                </div>
                <div id="feedback" style="margin-top: 15px;"></div>
            </div>
            <div class="btn-container">
                <button class="btn" onclick="verifierReponse('${q.answer.replace(/'/g, "\\'")}')">Vérifier</button>
                <button class="btn" onclick="questionSuivante()">Suivant</button>
                <button class="btn" onclick="questionPrecedente()">Précédent</button>
            </div>
        `;
        document.getElementById('userAnswer').focus();
    }

    function verifierReponse(bonneReponse) {
        const userAnswer = document.getElementById('userAnswer').value;
        const feedback = document.getElementById('feedback');
        
        const userNorm = normaliserAccents(userAnswer);
        const reponseNorm = normaliserAccents(bonneReponse);
        
        if (userNorm === reponseNorm) {
            feedback.innerHTML = '<div style="color: green; font-size: 16px; font-weight: bold;">✓ Correct!</div>';
        } else {
            feedback.innerHTML = `<div style="color: red; font-size: 16px; font-weight: bold;">✗ Incorrect</div><div style="color: #666; margin-top: 10px;">Bonne réponse: <strong>${bonneReponse}</strong></div>`;
        }
    }

    function questionSuivante() {
        if (currentQuestion < questions.length - 1) {
            currentQuestion++;
            afficherQuestion();
        }
    }

    function questionPrecedente() {
        if (currentQuestion > 0) {
            currentQuestion--;
            afficherQuestion();
        }
    }

    let currentQuestionBase = 0;
    let questionsBase = [];

    function genererQuestionsVerbsBase() {
        questionsBase = [];
        conjugaisonsBase.forEach(conj => {
            for (let i = 0; i < pronounKeys.length; i++) {
                questionsBase.push({
                    question: `Conjugue "${conj.infinitif}" (${conj.verbe}) à la 3e personne du singulier présent`,
                    answer: conj.el,
                    type: "conjugaison"
                });
            }
        });

        conjugaisonsBase.forEach(conj => {
            questionsBase.push({
                question: `Qu'est-ce que "${conj.verbe}" signifie?`,
                answer: conj.infinitif,
                type: "traduction"
            });
        });

        for (let i = 0; i < 300; i++) {
            const conj = conjugaisonsBase[Math.floor(Math.random() * conjugaisonsBase.length)];
            const pronoun = pronounKeys[Math.floor(Math.random() * pronounKeys.length)];
            const pronounFr = pronouns[pronounKeys.indexOf(pronoun)];
            questionsBase.push({
                question: `Conjugue "${conj.verbe}" avec "${pronounFr}" au présent`,
                answer: conj[pronoun],
                type: "random"
            });
        }

        questionsBase = questionsBase.sort(() => Math.random() - 0.5);
        currentQuestionBase = 0;
        afficherQuestionBase();
    }

    function afficherQuestionBase() {
        const container = document.getElementById('exercices-base-container');
        if (currentQuestionBase >= questionsBase.length) {
            container.innerHTML = '<div class="card"><h3>Bravo!</h3><p>Vous avez complété tous les exercices des verbes de base!</p><button class="btn" onclick="genererQuestionsVerbsBase()">Recommencer</button></div>';
            return;
        }

        const q = questionsBase[currentQuestionBase];
        container.innerHTML = `
            <div class="score">Question ${currentQuestionBase + 1} / ${questionsBase.length}</div>
            <div class="flashcard">
                <div class="flashcard-question">${q.question}</div>
                <div style="margin-top: 20px;">
                    <input type="text" id="userAnswerBase" placeholder="Votre réponse..." style="padding: 10px; font-size: 16px; width: 100%; max-width: 400px; border: 2px solid #ddd; border-radius: 5px; box-sizing: border-box;" onkeypress="if(event.key==='Enter') verifierReponseBase('${q.answer.replace(/'/g, "\\'")}')">
                </div>
                <div id="feedbackBase" style="margin-top: 15px;"></div>
            </div>
            <div class="btn-container">
                <button class="btn" onclick="verifierReponseBase('${q.answer.replace(/'/g, "\\'")}')">Vérifier</button>
                <button class="btn" onclick="questionSuivanteBase()">Suivant</button>
                <button class="btn" onclick="questionPrecedenteBase()">Précédent</button>
            </div>
        `;
        document.getElementById('userAnswerBase').focus();
    }

    function verifierReponseBase(bonneReponse) {
        const userAnswer = document.getElementById('userAnswerBase').value;
        const feedback = document.getElementById('feedbackBase');
        
        const userNorm = normaliserAccents(userAnswer);
        const reponseNorm = normaliserAccents(bonneReponse);
        
        if (userNorm === reponseNorm) {
            feedback.innerHTML = '<div style="color: green; font-size: 16px; font-weight: bold;">✓ Correct!</div>';
        } else {
            feedback.innerHTML = `<div style="color: red; font-size: 16px; font-weight: bold;">✗ Incorrect</div><div style="color: #666; margin-top: 10px;">Bonne réponse: <strong>${bonneReponse}</strong></div>`;
        }
    }

    function questionSuivanteBase() {
        if (currentQuestionBase < questionsBase.length - 1) {
            currentQuestionBase++;
            afficherQuestionBase();
        }
    }

    function questionPrecedenteBase() {
        if (currentQuestionBase > 0) {
            currentQuestionBase--;
            afficherQuestionBase();
        }
    }

    window.addEventListener('load', function() {
        genererQuestions();
    });
</script>

</body>
</html>
